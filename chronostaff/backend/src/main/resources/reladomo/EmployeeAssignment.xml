<?xml version="1.0" encoding="UTF-8" ?>
<MithraObject objectType="transactional">
    <PackageName>io.github.chronostaff.domain</PackageName>
    <ClassName>EmployeeAssignment</ClassName>
    <DefaultTable>EMPLOYEE_ASSIGNMENTS</DefaultTable>

    <!-- Bitemporal entity - business date and processing date -->
    <AsOfAttribute name="businessDate"
                   fromColumnName="BUSINESS_FROM"
                   toColumnName="BUSINESS_THRU"
                   infinityDate="[com.gs.fw.common.mithra.util.DefaultInfinityTimestamp.getDefaultInfinity()]"/>

    <AsOfAttribute name="processingDate"
                   fromColumnName="PROCESSING_FROM"
                   toColumnName="PROCESSING_THRU"
                   toIsInclusive="false"
                   infinityDate="[com.gs.fw.common.mithra.util.DefaultInfinityTimestamp.getDefaultInfinity()]"/>

    <Attribute name="id" javaType="long" columnName="ID" primaryKey="true" primaryKeyGeneratorStrategy="SimulatedSequence">
        <SimulatedSequence sequenceName="EMPLOYEE_ASSIGNMENT_SEQ" hasSourceAttribute="false" sequenceObjectFactoryName="io.github.reladomokotlin.springboot.sequence.GenericSequenceObjectFactory"/>
    </Attribute>
    <Attribute name="employeeId" javaType="long" columnName="EMPLOYEE_ID" nullable="false"/>
    <Attribute name="departmentId" javaType="long" columnName="DEPARTMENT_ID" nullable="false"/>
    <Attribute name="positionId" javaType="long" columnName="POSITION_ID" nullable="false"/>

    <!-- Audit trail: who made the change -->
    <Attribute name="updatedBy" javaType="String" columnName="UPDATED_BY" nullable="true" maxLength="100"/>

    <!-- Relationships -->
    <Relationship name="employee" relatedObject="Employee" relatedIsDependent="false" cardinality="many-to-one">
        this.employeeId = Employee.id and this.processingDate = Employee.processingDate
    </Relationship>

    <Relationship name="department" relatedObject="Department" relatedIsDependent="false" cardinality="many-to-one">
        this.departmentId = Department.id and this.processingDate = Department.processingDate
    </Relationship>

    <Relationship name="position" relatedObject="Position" relatedIsDependent="false" cardinality="many-to-one">
        this.positionId = Position.id
    </Relationship>
</MithraObject>
