-- Create the orders table with bitemporal columns
DROP TABLE IF EXISTS ORDERS;

CREATE TABLE ORDERS (
    ORDER_ID BIGINT NOT NULL,
    CUSTOMER_ID BIGINT NOT NULL,
    ORDER_DATE TIMESTAMP NOT NULL,
    AMOUNT DECIMAL(19, 2) NOT NULL,
    STATUS VARCHAR(20) NOT NULL,
    DESCRIPTION VARCHAR(500),
    BUSINESS_FROM TIMESTAMP NOT NULL,
    BUSINESS_THRU TIMESTAMP NOT NULL,
    PROCESSING_FROM TIMESTAMP NOT NULL,
    PROCESSING_THRU TIMESTAMP NOT NULL,
    PRIMARY KEY (ORDER_ID, BUSINESS_FROM, PROCESSING_FROM)
);

-- Create indexes for better performance
CREATE INDEX IDX_ORDERS_CUSTOMER ON ORDERS(CUSTOMER_ID);
CREATE INDEX IDX_ORDERS_BUSINESS_DATE ON ORDERS(BUSINESS_FROM, BUSINESS_THRU);
CREATE INDEX IDX_ORDERS_PROCESSING_DATE ON ORDERS(PROCESSING_FROM, PROCESSING_THRU);
CREATE INDEX IDX_ORDERS_STATUS ON ORDERS(STATUS);

-- Insert sample data
INSERT INTO ORDERS (
    ORDER_ID, CUSTOMER_ID, ORDER_DATE, AMOUNT, STATUS, DESCRIPTION,
    BUSINESS_FROM, BUSINESS_THRU, PROCESSING_FROM, PROCESSING_THRU
) VALUES 
(
    1, 100, '2024-01-01 10:00:00', 999.99, 'PENDING', 'First order',
    '2024-01-01 00:00:00', '9999-12-01 23:59:00', '2024-01-01 10:00:00', '9999-12-01 23:59:00'
),
(
    2, 100, '2024-01-02 14:30:00', 1500.00, 'COMPLETED', 'Second order',
    '2024-01-02 00:00:00', '9999-12-01 23:59:00', '2024-01-02 14:30:00', '9999-12-01 23:59:00'
),
(
    3, 200, '2024-01-03 09:15:00', 750.50, 'PENDING', 'Third order',
    '2024-01-03 00:00:00', '9999-12-01 23:59:00', '2024-01-03 09:15:00', '9999-12-01 23:59:00'
);